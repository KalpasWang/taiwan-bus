var Ut=Object.defineProperty;var kt=Object.getOwnPropertySymbols;var Vt=Object.prototype.hasOwnProperty,Zt=Object.prototype.propertyIsEnumerable;var bt=(s,t,o)=>t in s?Ut(s,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[t]=o,St=(s,t)=>{for(var o in t||(t={}))Vt.call(t,o)&&bt(s,o,t[o]);if(kt)for(var o of kt(t))Zt.call(t,o)&&bt(s,o,t[o]);return s};import{o as E,r as T,a as p,c as f,b as e,u as _,d as u,w as h,e as zt,i as H,f as Z,t as b,g as R,h as O,F as j,n as B,j as v,k as S,l as z,m as ut,p as K,v as Ot,q as jt,s as Kt,x as Ft,L,y as Nt,z as qt,A as Y,B as xt,C as Qt,D as U,E as tt,G as nt,T as it,H as et,I as J,J as _t,K as Gt,M as Yt,N as Jt,O as Wt,P as Xt,Q as te}from"./vendor.5cbffd2b.js";const ee=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function o(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerpolicy&&(r.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?r.credentials="include":i.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=o(i);fetch(i.href,r)}};ee();var se="./assets/logo.7036eefb.svg",yt="./assets/marker.77fe7bf2.svg",It="./assets/search-black.6bd5ba0a.svg";const oe={class:"home-height position-relative bg-home overflow-hidden"},ne=["src"],ie=zt('<div class="circle circle1"></div><div class="circle circle2"></div><div class="circle circle3"></div><div class="circle circle4"></div><div class="circle circle5"></div><div class="circle circle6"></div>',6),ae={class:"ball blue-ball d-flex justify-content-center align-items-center"},re=["src"],le=e("span",{class:"link-light fs-5 lh-base"},"\u9644\u8FD1\u516C\u8ECA\u7AD9",-1),ce={class:"ball white-ball d-flex justify-content-center align-items-center"},de=["src"],ue=e("span",{class:"link-dark fs-5 lh-base"},"\u67E5\u8A62\u516C\u8ECA",-1),_e={class:"ball yellow-ball d-flex justify-content-center align-items-center"},ye=["src"],pe=e("span",{class:"link-dark fs-5 lh-base"},"\u67E5\u8A62\u5BA2\u904B",-1),he=e("p",{class:"footer text-light"},"Taiwan Bus \xA9 Code: Kalpas / Design: KT",-1),me={setup(s){const t=()=>{const o=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${o}px`);const n=window.innerHeight,i=750,r=550;let d;n<i&&n>r?d=(i-n)/2:n<=r?d=100:d=0,document.documentElement.style.setProperty("--subtracted",d+"px")};return E(()=>{t(),window.addEventListener("resize",t)}),(o,n)=>{const i=T("router-link");return p(),f("div",oe,[e("img",{src:_(se),class:"logo-home-size mt-5 mt-md-9 ms-4 ms-md-5 ms-lg-8"},null,8,ne),ie,e("div",ae,[u(i,{to:{name:"NearBy"},role:"button",class:"d-flex flex-column w-100 h-100 rounded-circle text-decoration-none justify-content-center align-items-center"},{default:h(()=>[e("img",{src:_(yt),width:"23.5",height:"31.33"},null,8,re),le]),_:1})]),e("div",ce,[u(i,{to:{name:"CitySearch"},role:"button",class:"d-flex flex-column w-100 h-100 rounded-circle text-decoration-none justify-content-center align-items-center"},{default:h(()=>[e("img",{src:_(It),width:"22.6"},null,8,de),ue]),_:1})]),e("div",_e,[u(i,{to:{name:"InterCitySearch"},role:"button",class:"d-flex flex-column w-100 h-100 rounded-circle text-decoration-none justify-content-center align-items-center"},{default:h(()=>[e("img",{src:_(It),width:"22.6"},null,8,ye),pe]),_:1})]),he])}}},fe={key:0,class:"fs-6 text-light mt-5"},ve={class:"list-group"},Ce={key:0,class:"mb-0 font-roboto"},ge={key:1,class:"mb-0 font-roboto"},$e={key:2,class:"text-light fs-7"},we=e("span",{class:"text-primary mx-1"},"\u5F80",-1),ke={key:3},be={key:0,class:"text-light fs-7"},pt={props:{type:String,cityName:String},setup(s){const t=s,{type:o,cityName:n}=t,i=d=>o==="city"?{city:d.City,routeName:d.RouteName.Zh_tw}:o.includes("intercity")?{routeName:d.RouteName.Zh_tw}:{},r=H("routesList");return(d,a)=>{const c=T("router-link"),$=T("perfect-scrollbar");return p(),Z($,null,{default:h(()=>[_(n)?(p(),f("h4",fe,b(_(n)),1)):R("",!0),e("ul",ve,[(p(!0),f(j,null,O(_(r),(g,y)=>(p(),f("li",{key:g.RouteUID,class:B(["list-group-item list-group-item-action",{"bg-secondary":y%2==0}])},[u(c,{to:{name:_(o)==="city"?"RoutePage":"InterCityRoutePage",params:i(g)},class:"d-block link-primary text-decoration-none"},{default:h(()=>[g.UseSubName?(p(),f("h6",Ce,b(g.SubRouteName.Zh_tw),1)):(p(),f("h6",ge,b(g.RouteName.Zh_tw),1)),g.DepartureStopNameZh?(p(),f("p",$e,[v(b(g.DepartureStopNameZh)+" ",1),we,v(" "+b(g.DestinationStopNameZh),1)])):R("",!0),_(o)==="intercity-from-to"?(p(),f("div",ke,[(p(!0),f(j,null,O(g.Stops,(k,l)=>(p(),f("span",{key:l,class:"text-light fs-7"},[l!==0?(p(),f("span",be," \u2014 ")):R("",!0),v(" "+b(k.StopName.Zh_tw),1)]))),128))])):R("",!0)]),_:2},1032,["to"])],2))),128))])]),_:1})}}};var Lt="./assets/Logo.950c1aa0.png";var F=(s,t)=>{for(const[o,n]of t)s[o]=n;return s};const Se=["src"],Ne=v(" \u56DE\u9996\u9801 "),xe={setup(s){return(t,o)=>{const n=T("router-link");return p(),Z(n,{to:{name:"Home"},class:"hide-text"},{default:h(()=>[e("img",{src:_(Lt),alt:"\u56DE\u9996\u9801",class:"logo-header-size"},null,8,Se),Ne]),_:1})}}};var at=F(xe,[["__scopeId","data-v-13b1ce34"]]);const Ie={class:"header-shadow bg-dark row p-3 px-lg-0"},Le={class:"col-auto"},Be={class:"col"},De=["readonly"],Bt={setup(s){const{query:t,updateRouteNameQuery:o}=H("query"),{isManual:n}=H("manualInput"),i=S(null),r=z({get(){return t.routeName},set(d){o(d,!0)}});return E(()=>{ut(n,d=>{d&&i.value.focus()})}),(d,a)=>(p(),f("header",Ie,[e("div",Le,[u(at)]),e("div",Be,[K(e("input",{ref:(c,$)=>{$.input=c,i.value=c},"onUpdate:modelValue":a[0]||(a[0]=c=>jt(r)?r.value=c:null),readonly:!_(n),type:"text",class:"form-control bg-secondary py-md-3 ls-1",placeholder:"\u9078\u64C7\u8DEF\u7DDA\u6216\u624B\u52D5\u8F38\u5165\u95DC\u9375\u5B57"},null,8,De),[[Ot,_(r)]])])]))}},C={props:{white:Boolean},setup(s){const t=s;Kt();const o=z(()=>({"text-light":t.white}));return(n,i)=>(p(),f("div",{class:B(["btn btn-outline-primary d-block",_(o)])},[Ft(n.$slots,"default")],2))}};var Dt="./assets/delete-icon.6fc566bb.svg",Pe="./assets/bus.ed32ce37.svg";const W=[{CityID:"A",CityName:"\u81FA\u5317\u5E02",CityCode:"TPE",City:"Taipei",CountyID:"A",Version:"21.08.1",NearByCitys:["Keelung","NewTaipei"]},{CityID:"B",CityName:"\u81FA\u4E2D\u5E02",CityCode:"TXG",City:"Taichung",CountyID:"B",Version:"21.08.1",NearByCitys:["MiaoliCounty","NantouCounty","ChanghuaCounty","HualienCounty"]},{CityID:"C",CityName:"\u57FA\u9686\u5E02",CityCode:"KEE",City:"Keelung",CountyID:"C",Version:"21.08.1",NearByCitys:["Taipei","NewTaipei"]},{CityID:"D",CityName:"\u81FA\u5357\u5E02",CityCode:"TNN",City:"Tainan",CountyID:"D",Version:"21.08.1",NearByCitys:["Kaohsiung","Chiayi","ChiayiCounty"]},{CityID:"E",CityName:"\u9AD8\u96C4\u5E02",CityCode:"KHH",City:"Kaohsiung",CountyID:"E",Version:"21.08.1",NearByCitys:["Tainan","ChiayiCounty","PingtungCounty"]},{CityID:"F",CityName:"\u65B0\u5317\u5E02",CityCode:"NWT",City:"NewTaipei",CountyID:"F",Version:"21.08.1",NearByCitys:["Taipei","Keelung","YilanCounty","Taoyuan"]},{CityID:"G",CityName:"\u5B9C\u862D\u7E23",CityCode:"ILA",City:"YilanCounty",CountyID:"G",Version:"21.08.1",NearByCitys:["Taipei","NewTaipei","HualienCounty"]},{CityID:"H",CityName:"\u6843\u5712\u5E02",CityCode:"TAO",City:"Taoyuan",CountyID:"H",Version:"21.08.1",NearByCitys:["Taipei","NewTaipei","HsinchuCounty","Hsinchu"]},{CityID:"I",CityName:"\u5609\u7FA9\u5E02",CityCode:"CYI",City:"Chiayi",CountyID:"I",Version:"21.08.1",NearByCitys:["Tainan","YunlinCounty","ChiayiCounty"]},{CityID:"J",CityName:"\u65B0\u7AF9\u7E23",CityCode:"HSQ",City:"HsinchuCounty",CountyID:"J",Version:"21.08.1",NearByCitys:["Taoyuan","MiaoliCounty","Hsinchu"]},{CityID:"K",CityName:"\u82D7\u6817\u7E23",CityCode:"MIA",City:"MiaoliCounty",CountyID:"K",Version:"21.08.1",NearByCitys:["Taichung","HsinchuCounty","Hsinchu"]},{CityID:"M",CityName:"\u5357\u6295\u7E23",CityCode:"NAN",City:"NantouCounty",CountyID:"M",Version:"21.08.1",NearByCitys:["Taichung","ChanghuaCounty","YunlinCounty","ChiayiCounty","HualienCounty"]},{CityID:"N",CityName:"\u5F70\u5316\u7E23",CityCode:"CHA",City:"ChanghuaCounty",CountyID:"N",Version:"21.08.1",NearByCitys:["Taichung","NantouCounty","YunlinCounty"]},{CityID:"O",CityName:"\u65B0\u7AF9\u5E02",CityCode:"HSZ",City:"Hsinchu",CountyID:"O",Version:"21.08.1",NearByCitys:["HsinchuCounty"]},{CityID:"P",CityName:"\u96F2\u6797\u7E23",CityCode:"YUN",City:"YunlinCounty",CountyID:"P",Version:"21.08.1",NearByCitys:["NantouCounty","ChanghuaCounty","ChiayiCounty"]},{CityID:"Q",CityName:"\u5609\u7FA9\u7E23",CityCode:"CYQ",City:"ChiayiCounty",CountyID:"Q",Version:"21.08.1",NearByCitys:["Tainan","Kaohsiung","Chiayi","NantouCounty","YunlinCounty"]},{CityID:"T",CityName:"\u5C4F\u6771\u7E23",CityCode:"PIF",City:"PingtungCounty",CountyID:"T",Version:"21.08.1",NearByCitys:["Kaohsiung","TaitungCounty"]},{CityID:"U",CityName:"\u82B1\u84EE\u7E23",CityCode:"HUA",City:"HualienCounty",CountyID:"U",Version:"21.08.1",NearByCitys:["YilanCounty","NantouCounty","TaitungCounty"]},{CityID:"V",CityName:"\u81FA\u6771\u7E23",CityCode:"TTT",City:"TaitungCounty",CountyID:"V",Version:"21.08.1",NearByCitys:["PingtungCounty","HualienCounty"]},{CityID:"W",CityName:"\u91D1\u9580\u7E23",CityCode:"KIN",City:"KinmenCounty",CountyID:"W",Version:"21.08.1",NearByCitys:[]},{CityID:"X",CityName:"\u6F8E\u6E56\u7E23",CityCode:"PEN",City:"PenghuCounty",CountyID:"X",Version:"21.08.1",NearByCitys:[]},{CityID:"Z",CityName:"\u9023\u6C5F\u7E23",CityCode:"LIE",City:"LienchiangCounty",CountyID:"Z",Version:"21.08.1",NearByCitys:[]}],Te=L.icon({iconUrl:Pe,iconSize:[36,36],iconAnchor:[18,18],popupAnchor:[18,-18],shadowUrl:null,shadowSize:[0,0],shadowAnchor:[18,18]}),Re={key:0,class:"bg-secondary p-4 px-md-7 py-md-5 p-lg-4"},Ae={class:"row g-1 mb-3"},Me={class:"col-6"},Ee=["src"],He={key:0},Ue={key:1},Ve={class:"col-4"},Ze=v("\u624B\u52D5\u8F38\u5165"),ze={class:"row row-cols-5 g-1"},Oe={class:"col"},je=v("A"),Ke={class:"col"},Fe=v("\u85CD"),qe={class:"col"},Qe=v("1"),Ge={class:"col"},Ye=v("2"),Je={class:"col"},We=v("3"),Xe={class:"col"},ts=v("\u7DA0"),es={class:"col"},ss=v("\u68D5"),os={class:"col"},ns=v("4"),is={class:"col"},as=v("5"),rs={class:"col"},ls=v("6"),cs={class:"col"},ds=v("\u6A58"),us={class:"col"},_s=v("\u5C0F"),ys={class:"col"},ps=v("7"),hs={class:"col"},ms=v("8"),fs={class:"col"},vs=v("9"),Cs={class:"col"},gs=v("\u5E79\u7DDA"),$s={class:"col"},ws=v("\u66F4\u591A"),ks={class:"col"},bs=v("C"),Ss={class:"col"},Ns=v("0"),xs={class:"col"},Is=["src"],Ls={key:1,class:"bg-secondary p-4 px-md-7 py-md-5 p-lg-4"},Bs={class:"row row-cols-5 g-1"},Ds={class:"col flex-grow-1"},Ps=v("\u8A2D\u5B9A"),Ts={key:2,class:"bg-secondary p-4 px-md-7 py-md-5 p-lg-4"},Rs={class:"row row-cols-5 g-1"},As={class:"col"},Ms=v("F"),Es={class:"col"},Hs=v("R"),Us={class:"col"},Vs=v("T"),Zs={class:"col"},zs=v("\u5FEB"),Os={class:"col"},js=v("\u5167\u79D1"),Ks={class:"col"},Fs=v("\u8DF3\u86D9"),qs={class:"col"},Qs=v("\u901A\u52E4"),Gs={class:"col"},Ys=v("\u5357\u8EDF"),Js={class:"col"},Ws=v("\u5148\u5C0E"),Xs={class:"col"},to=v("\u591C\u9593"),eo={class:"col"},so=v("\u5E02\u6C11"),oo={class:"col"},no=v("\u5176\u4ED6"),io={class:"col flex-grow-1"},ao=v("\u56DE\u4E0A\u4E00\u9801"),ro={setup(s){const{query:t,updateCityQuery:o,updateRouteNameQuery:n}=H("query"),{updateIsManual:i}=H("manualInput"),r=S(1),d=S(null),a=z(()=>d.value?d.value.City:t.city.City),c=()=>{i(!0)},$=k=>{d.value=k},g=()=>{o(d.value),r.value=1},y=k=>{n(k)};return(k,l)=>(p(),f("div",null,[r.value===1?(p(),f("div",Re,[e("div",Ae,[e("div",Me,[u(C,{onClick:l[0]||(l[0]=m=>r.value=2),white:""},{default:h(()=>[e("img",{src:_(yt),width:"13",height:"15.89",class:"me-2"},null,8,Ee),_(t).city.CityName?(p(),f("span",He,b(_(t).city.CityName),1)):(p(),f("span",Ue,"\u9078\u64C7\u7E23\u5E02"))]),_:1})]),e("div",Ve,[u(C,{onClick:l[1]||(l[1]=m=>c())},{default:h(()=>[Ze]),_:1})])]),e("div",ze,[e("div",Oe,[u(C,{onClick:l[2]||(l[2]=m=>y("A"))},{default:h(()=>[je]),_:1})]),e("div",Ke,[u(C,{onClick:l[3]||(l[3]=m=>y("\u85CD"))},{default:h(()=>[Fe]),_:1})]),e("div",qe,[u(C,{onClick:l[4]||(l[4]=m=>y("1")),white:""},{default:h(()=>[Qe]),_:1})]),e("div",Ge,[u(C,{onClick:l[5]||(l[5]=m=>y("2")),white:""},{default:h(()=>[Ye]),_:1})]),e("div",Je,[u(C,{onClick:l[6]||(l[6]=m=>y("3")),white:""},{default:h(()=>[We]),_:1})]),e("div",Xe,[u(C,{onClick:l[7]||(l[7]=m=>y("\u7DA0"))},{default:h(()=>[ts]),_:1})]),e("div",es,[u(C,{onClick:l[8]||(l[8]=m=>y("\u68D5"))},{default:h(()=>[ss]),_:1})]),e("div",os,[u(C,{onClick:l[9]||(l[9]=m=>y("4")),white:""},{default:h(()=>[ns]),_:1})]),e("div",is,[u(C,{onClick:l[10]||(l[10]=m=>y("5")),white:""},{default:h(()=>[as]),_:1})]),e("div",rs,[u(C,{onClick:l[11]||(l[11]=m=>y("6")),white:""},{default:h(()=>[ls]),_:1})]),e("div",cs,[u(C,{onClick:l[12]||(l[12]=m=>y("\u6A58"))},{default:h(()=>[ds]),_:1})]),e("div",us,[u(C,{onClick:l[13]||(l[13]=m=>y("\u5C0F"))},{default:h(()=>[_s]),_:1})]),e("div",ys,[u(C,{onClick:l[14]||(l[14]=m=>y("7")),white:""},{default:h(()=>[ps]),_:1})]),e("div",hs,[u(C,{onClick:l[15]||(l[15]=m=>y("8")),white:""},{default:h(()=>[ms]),_:1})]),e("div",fs,[u(C,{onClick:l[16]||(l[16]=m=>y("9")),white:""},{default:h(()=>[vs]),_:1})]),e("div",Cs,[u(C,{onClick:l[17]||(l[17]=m=>y("\u5E79\u7DDA"))},{default:h(()=>[gs]),_:1})]),e("div",$s,[u(C,{onClick:l[18]||(l[18]=m=>r.value=3)},{default:h(()=>[ws]),_:1})]),e("div",ks,[u(C,{onClick:l[19]||(l[19]=m=>y())},{default:h(()=>[bs]),_:1})]),e("div",Ss,[u(C,{onClick:l[20]||(l[20]=m=>y("0")),white:""},{default:h(()=>[Ns]),_:1})]),e("div",xs,[u(C,{onClick:l[21]||(l[21]=m=>y(-1))},{default:h(()=>[e("img",{src:_(Dt),alt:"delete"},null,8,Is)]),_:1})])])])):r.value===2?(p(),f("div",Ls,[e("div",Bs,[(p(!0),f(j,null,O(_(W),m=>(p(),f("div",{key:m.City,class:"col"},[u(C,{class:B({active:m.City===_(a)}),onClick:N=>$(m)},{default:h(()=>[v(b(m.CityName),1)]),_:2},1032,["class","onClick"])]))),128)),e("div",Ds,[u(C,{onClick:l[22]||(l[22]=m=>g())},{default:h(()=>[Ps]),_:1})])])])):r.value===3?(p(),f("div",Ts,[e("div",Rs,[e("div",As,[u(C,{onClick:l[23]||(l[23]=m=>y("F"))},{default:h(()=>[Ms]),_:1})]),e("div",Es,[u(C,{onClick:l[24]||(l[24]=m=>y("R"))},{default:h(()=>[Hs]),_:1})]),e("div",Us,[u(C,{onClick:l[25]||(l[25]=m=>y("T"))},{default:h(()=>[Vs]),_:1})]),e("div",Zs,[u(C,{onClick:l[26]||(l[26]=m=>y("\u5FEB"))},{default:h(()=>[zs]),_:1})]),e("div",Os,[u(C,{onClick:l[27]||(l[27]=m=>y("\u5167\u79D1"))},{default:h(()=>[js]),_:1})]),e("div",Ks,[u(C,{onClick:l[28]||(l[28]=m=>y("\u8DF3\u86D9"))},{default:h(()=>[Fs]),_:1})]),e("div",qs,[u(C,{onClick:l[29]||(l[29]=m=>y("\u901A\u52E4"))},{default:h(()=>[Qs]),_:1})]),e("div",Gs,[u(C,{onClick:l[30]||(l[30]=m=>y("\u5357\u8EDF"))},{default:h(()=>[Ys]),_:1})]),e("div",Js,[u(C,{onClick:l[31]||(l[31]=m=>y("\u5148\u5C0E"))},{default:h(()=>[Ws]),_:1})]),e("div",Xs,[u(C,{onClick:l[32]||(l[32]=m=>y("\u591C\u9593"))},{default:h(()=>[to]),_:1})]),e("div",eo,[u(C,{onClick:l[33]||(l[33]=m=>y("\u5E02\u6C11"))},{default:h(()=>[so]),_:1})]),e("div",oo,[u(C,{onClick:l[34]||(l[34]=m=>y("\u5176\u4ED6"))},{default:h(()=>[no]),_:1})]),e("div",io,[u(C,{onClick:l[35]||(l[35]=m=>r.value=1)},{default:h(()=>[ao]),_:1})])])])):R("",!0)]))}},ht=Nt.create({baseURL:"https://ptx.transportdata.tw/MOTC/v2/Bus/",headers:Pt(),params:{$top:30,$format:"JSON"}}),P=Nt.create({baseURL:"https://ptx.transportdata.tw/MOTC/v2/Bus/",headers:Pt(),params:{$format:"JSON"}});function Pt(){let s="d0a241f95bef45cb9ab5f5cb1ec1bdfb",t="PQaTMptO5MxMu1gtJpVhGwezMaI",o=new Date().toGMTString(),n=new qt("SHA-1","TEXT");n.setHMACKey(t,"TEXT"),n.update("x-date: "+o);let i=n.getHMAC("B64");return{Authorization:'hmac username="'+s+'", algorithm="hmac-sha1", headers="x-date", signature="'+i+'"',"X-Date":o}}const lo=s=>{let t={text:"",bgColor:"bg-dark",color:"text-primary",linkColor:"link-light",border:!0};const o=s.EstimateTime;if(o<=30)t.text="\u9032\u7AD9\u4E2D",t.bgColor="bg-primary",t.color="text-dark",t.linkColor="link-primary";else if(o<=90)t.text="\u5373\u5C07\u5230\u7AD9",t.bgColor="bg-primary",t.color="text-dark",t.linkColor="link-primary";else if(o){const n=Math.floor(o/60);t.text=`\u7D04${n}\u5206`}else{switch(s.StopStatus){case 0:t.text="--";break;case 1:t.text="\u672A\u767C\u8ECA";break;case 2:t.text="\u4EA4\u7BA1\u4E0D\u505C\u9760";break;case 3:t.text="\u672B\u73ED\u8ECA\u5DF2\u904E";break;case 4:t.text="\u672A\u71DF\u904B";break}t.bgColor="bg-dark",t.color="text-warning",t.border=!1}return t},Tt=s=>{const t=W.find(o=>o.CityCode===s);return t?t.City:"intercity"},co=s=>W.find(o=>o.City===s).NearByCitys,rt=s=>{let t="";switch(s){case"N":t="\u5411\u5317";break;case"S":t="\u5411\u5357";break;case"E":t="\u5411\u6771";break;case"W":t="\u5411\u897F";break}return t},mt=s=>s.slice(10).trim().slice(1,-1).split(/,\s|,/).map((o,n)=>{const[i,r]=o.split(" ");return[parseFloat(r),parseFloat(i)]}),st=(s,t)=>{if(!Array.isArray(t)){console.error("list is not an array"),console.log(t);return}return t.filter(o=>o.RouteName.Zh_tw===s)},Rt=()=>new Promise(s=>{setTimeout(()=>{s()},500)}),w=Y({citysList:W,city:"",routeUID:"",routeName:"",routesList:[],forwardRouteShape:[],backwardRouteShape:[],forwardStopsList:[],backwardStopsList:[],forwardBusList:[],backwardBusList:[],station:{},userPosition:{},nearByStations:[],pending:!1,error:null}),uo=async(s,t)=>{let o;s&&!t?o=`Route/City/${s}`:o=`Route/City/${s}/${t}`;const n=await ht.get(o);w.routesList=n.data,w.pending=!1},_o=async(s,t)=>{const o=`RealTimeByFrequency/City/${s}/${t}`,n=await P.get(o),i=st(t,n.data);if(!i&&!i[0])return;const r=i.filter(a=>a.Direction===0),d=i.filter(a=>a.Direction===1);w.forwardBusList=r,w.backwardBusList=d},yo=async(s,t)=>{const o=`Vehicle/City/${s}`,i=(await P.get(o,{params:{$filter:`PlateNumb eq '${t}'`}})).data[0];return!!(i&&i.VehicleType>0&&i.VehicleType<3)},po=async(s,t)=>{const o=`Shape/City/${s}/${t}`,n=await P.get(o),i=st(t,n.data);if(w.forwardRouteShape=null,w.backwardRouteShape=null,!(!i&&!i[0]))if(i[0].Direction>=0){const r=i.find(a=>a.Direction===0),d=i.find(a=>a.Direction===1);r&&(w.forwardRouteShape=mt(r.Geometry)),d&&(w.backwardRouteShape=mt(d.Geometry))}else{const r=mt(i[0].Geometry);w.forwardRouteShape=r,w.backwardRouteShape=r}},ho=async(s,t)=>{const o=`RealTimeNearStop/City/${s}/${t}`,n=await P.get(o),i=st(t,n.data);if(!i&&!i[0])return;const r=i.filter(c=>c.Direction===0),d=i.filter(c=>c.Direction===1),a=async(c,$)=>{const g=$.find(y=>y.StopUID===c.StopUID);if(g){const y=await yo(s,g.PlateNumb);c.hasBus=!0,c.plate=g.PlateNumb,c.accessible=y}};w.forwardStopsList.forEach(c=>{a(c,r)}),w.backwardStopsList.forEach(c=>{a(c,d)})},mo=async(s,t)=>{const o=`StopOfRoute/City/${s}/${t}`,n=`EstimatedTimeOfArrival/City/${s}/${t}`,i=await P.get(o),r=await P.get(n),d=st(t,i.data);if(!d&&!d[0])return;const a=st(t,r.data);if(!a&&!a[0])return;w.city=s,w.routeName=d[0].RouteName.Zh_tw,w.routeUID=d[0].RouteUID,w.forwardStopsList.length=0,w.backwardStopsList.length=0;const c=d.find(l=>l.Direction===0).Stops,$=d.find(l=>l.Direction===1).Stops,g=a.filter(l=>l.Direction===0),y=a.filter(l=>l.Direction===1),k=(l,m)=>{const N=l.find(I=>I.StopUID===m.StopUID);let V;if(N){const I=lo(N);V=Object.assign(m,{EstimateTime:N.EstimateTime,TimeLabel:I.text,Color:I.color,BgColor:I.bgColor,StopStatus:N.StopStatus,Border:I.border,LinkColor:I.linkColor})}else V=Object.assign(m,{TimeLabel:"--",Color:"text-warning",BgColor:"bg-dark",StopStatus:1,Border:!1,LinkColor:"link-light"});return V};c.forEach(l=>{const m=k(g,l);w.forwardStopsList.push(m)}),$.forEach(l=>{const m=k(y,l);w.backwardStopsList.push(m)}),await ho(s,t),await _o(s,t),await po(s,t)},fo=s=>{if(!navigator.geolocation){w.error="Geolocation is not supported by your browser";return}navigator.geolocation.watchPosition(async t=>{w.pending=!0,w.error=null;const o=t.coords.latitude,n=t.coords.longitude;w.userPosition.lat=o,w.userPosition.lng=n;const i="Station/NearBy",r=await ht.get(i,{params:{$spatialFilter:`nearby(${o}, ${n}, ${s})`}});w.nearByStations.length=0,r.data.forEach(d=>{const a=Qt({lat:o,lng:n},{lat:d.StationPosition.PositionLat,lng:d.StationPosition.PositionLon});w.nearByStations.push(St({Distance:Math.round(a)},d))}),w.nearByStations.sort((d,a)=>d.Distance-a.Distance),w.pending=!1})},vo=async(s,t)=>{const o=`Station/City/${s}`;let n=await P.get(o,{params:{$filter:`StationID eq '${t}'`}});w.station=n.data[0],w.station.PassThrough=[];const i=co(s);i.unshift(s),i.forEach(async r=>{const d=`StopOfRoute/City/${r}/PassThrough/Station/${t}`;n=await P.get(d),n.data.forEach(a=>{const c=a.Stops;a.finalStop=c[c.length-1],w.station.PassThrough.some($=>$.RouteName.Zh_tw===a.RouteName.Zh_tw)||w.station.PassThrough.push(a)})})},ft=s=>async(t,o)=>{try{w.error=null,w.pending=!0,await s(t,o),w.pending=!1}catch(n){w.error=n.message,w.pending=!1}},Co=ft(uo),go=ft(mo),$o=ft(vo);var A={state:xt(w),fetchRoutesByCityAndRouteName:Co,fetchStopsAndBusArrivalTime:go,fetchNearByStations:fo,fetchStation:$o},ot="./assets/loading.5cb03800.svg",At="./assets/keyboard.594855cf.svg";const wo={class:"wrapper vh-100 container-lg position-relative"},ko={key:0,class:"fs-7 text-light px-3 mt-5"},bo={key:1,class:"px-3"},So={key:0,class:"mt-5 text-center text-light"},No=["src"],xo={key:1,class:"mt-5 text-center text-light"},Io={key:0,class:"keyboard"},Lo=["src"],Bo={setup(s){const{state:t}=A,o=S(null),n=Y({city:{CityID:"",CityName:"",CityCode:"",City:""},routeName:""}),i=S(!1),r=(g,y=!1)=>{if(y)n.routeName=g;else if(typeof g=="string"){const k=n.routeName;n.routeName=k+g}else if(g===-1){const k=n.routeName;n.routeName=k.slice(0,-1)}else g||(n.routeName="");n.city.City&&A.fetchRoutesByCityAndRouteName(n.city.City,n.routeName)},d=g=>{(g==null?void 0:g.City)&&(n.city=g,A.fetchRoutesByCityAndRouteName(n.city.City,n.routeName))},a=g=>{i.value=+g},c=()=>{const g=o.value.offsetHeight+"px";document.documentElement.style.setProperty("--h",g)};U("query",{query:n,updateCityQuery:d,updateRouteNameQuery:r}),U("routesList",tt(t,"routesList")),U("manualInput",{isManual:i,updateIsManual:a});function $(){c()}return E(()=>{c(),window.addEventListener("resize",$)}),nt(()=>{window.removeEventListener("resize",$)}),(g,y)=>(p(),f("div",wo,[u(Bt,{class:"header"}),e("div",{ref:(k,l)=>{l.routesList=k,o.value=k},id:"routesList",class:"main-content overflow-hidden"},[_(n).city.City?(p(),f("div",bo,[_(t).pending?(p(),f("h3",So,[e("img",{src:_(ot),width:"70",alt:"loading..."},null,8,No)])):_(t).error?(p(),f("h3",xo,b(_(t).error),1)):(p(),Z(pt,{key:2,type:"city",cityName:_(n).city.CityName},null,8,["cityName"]))])):(p(),f("h4",ko," \u8ACB\u5148\u9078\u64C7\u7E23\u5E02 "))],512),u(it,{name:"keyboard-slide",onAfterLeave:c},{default:h(()=>[i.value?R("",!0):(p(),f("div",Io,[u(ro)]))]),_:1}),u(it,{name:"badge-fade"},{default:h(()=>[i.value?(p(),f("div",{key:0,class:"keyboard-badge bg-primary shadow-sm",onClick:y[0]||(y[0]=k=>i.value=!1)},[e("img",{src:_(At),alt:"\u958B\u555F\u9375\u76E4"},null,8,Lo)])):R("",!0)]),_:1})]))}};var Do=F(Bo,[["__scopeId","data-v-313ca784"]]);const x=Y({citysList:W,routesList:[],routeUID:"",routeName:"",routesList:[],forwardRouteShape:[],backwardRouteShape:[],forwardStopsList:[],backwardStopsList:[],station:{},schedule:{},pending:!1,error:null}),Po=async(s,t)=>{const o=x.citysList.find(a=>a.City===s),n=x.citysList.find(a=>a.City===t),i="StopOfRoute/InterCity",r=await P.get(i,{params:{$filter:`Stops/any(d:d/LocationCityCode eq '${o.CityCode}')`}});x.routesList=[];const d=[];r.data.forEach(a=>{a.Stops.some($=>$.LocationCityCode===n.CityCode)&&d.push(a)}),d.forEach(a=>{const c=a.RouteName.Zh_tw,g=a.SubRouteName.Zh_tw.slice(c.length);a.UseSubName=!1,g!=="0"&&(a.UseSubName=!0),x.routesList.some(k=>k.SubRouteName.Zh_tw===a.SubRouteName.Zh_tw)||x.routesList.push(a)})},To=async s=>{const t=`Route/InterCity/${s}`,o=await ht.get(t);x.routesList=o.data},Ro=async s=>{const t="Station/InterCity";let o=await P.get(t,{params:{$filter:`StationID eq '${s}'`}});x.station=o.data[0],x.station.PassThrough=[];const n=`StopOfRoute/InterCity/PassThrough/Station/${s}`;o=await P.get(n),o.data.forEach(i=>{const r=i.Stops;i.finalStop=r[r.length-1],x.station.PassThrough.push(i)})},Ao=async s=>{const t=`Schedule/InterCity/${s}`,o=await P.get(t);x.routeName=s,x.schedule=o.data,console.log(x.schedule)},lt=s=>async(t,o)=>{try{x.error=null,x.pending=!0,await s(t,o),x.pending=!1}catch(n){x.error=n.message,x.pending=!1}},Mo=lt(Po),Eo=lt(To),Ho=lt(Ro),Uo=lt(Ao);var q={state:xt(x),fetchRoutesByCitys:Mo,fetchRoutesByRouteName:Eo,fetchStation:Ho,fetchSchedule:Uo};const Vo={class:"bg-secondary p-4 px-md-7 py-md-5 p-lg-4"},Zo={class:"row g-1 mb-3"},zo={class:"col-6"},Oo=["src"],jo=v(" \u4EE5\u8D77\u8A16\u5730\u5340\u641C\u5C0B "),Ko={class:"col-4"},Fo=v("\u624B\u52D5\u8F38\u5165"),qo={class:"row row-cols-5 g-1"},Qo={class:"col"},Go=v("A"),Yo={class:"col"},Jo=v("B"),Wo={class:"col"},Xo=v("1"),tn={class:"col"},en=v("2"),sn={class:"col"},on=v("3"),nn={class:"col"},an=v("C"),rn={class:"col"},ln=v("D"),cn={class:"col"},dn=v("4"),un={class:"col"},_n=v("5"),yn={class:"col"},pn=v("6"),hn={class:"col"},mn=v("E"),fn={class:"col"},vn=v("\u8DEF"),Cn={class:"col"},gn=v("7"),$n={class:"col"},wn=v("8"),kn={class:"col"},bn=v("9"),Sn={class:"col"},Nn=v("\u7532"),xn={class:"col"},In=v("\u652F"),Ln={class:"col"},Bn=v("C"),Dn={class:"col"},Pn=v("0"),Tn={class:"col"},Rn=["src"],An={setup(s){const{updateRouteNameQuery:t}=H("query"),{updateIsManual:o}=H("manualInput"),n=et(),i=()=>{o(!0)},r=d=>{t(d)};return(d,a)=>(p(),f("div",Vo,[e("div",Zo,[e("div",zo,[u(C,{onClick:a[0]||(a[0]=c=>_(n).push({name:"InterCitySearch2"})),white:""},{default:h(()=>[e("img",{src:_(yt),width:"13",height:"15.89",class:"me-2"},null,8,Oo),jo]),_:1})]),e("div",Ko,[u(C,{onClick:a[1]||(a[1]=c=>i())},{default:h(()=>[Fo]),_:1})])]),e("div",qo,[e("div",Qo,[u(C,{onClick:a[2]||(a[2]=c=>r("A"))},{default:h(()=>[Go]),_:1})]),e("div",Yo,[u(C,{onClick:a[3]||(a[3]=c=>r("B"))},{default:h(()=>[Jo]),_:1})]),e("div",Wo,[u(C,{onClick:a[4]||(a[4]=c=>r("1")),white:""},{default:h(()=>[Xo]),_:1})]),e("div",tn,[u(C,{onClick:a[5]||(a[5]=c=>r("2")),white:""},{default:h(()=>[en]),_:1})]),e("div",sn,[u(C,{onClick:a[6]||(a[6]=c=>r("3")),white:""},{default:h(()=>[on]),_:1})]),e("div",nn,[u(C,{onClick:a[7]||(a[7]=c=>r("C"))},{default:h(()=>[an]),_:1})]),e("div",rn,[u(C,{onClick:a[8]||(a[8]=c=>r("D"))},{default:h(()=>[ln]),_:1})]),e("div",cn,[u(C,{onClick:a[9]||(a[9]=c=>r("4")),white:""},{default:h(()=>[dn]),_:1})]),e("div",un,[u(C,{onClick:a[10]||(a[10]=c=>r("5")),white:""},{default:h(()=>[_n]),_:1})]),e("div",yn,[u(C,{onClick:a[11]||(a[11]=c=>r("6")),white:""},{default:h(()=>[pn]),_:1})]),e("div",hn,[u(C,{onClick:a[12]||(a[12]=c=>r("E"))},{default:h(()=>[mn]),_:1})]),e("div",fn,[u(C,{onClick:a[13]||(a[13]=c=>r("\u8DEF"))},{default:h(()=>[vn]),_:1})]),e("div",Cn,[u(C,{onClick:a[14]||(a[14]=c=>r("7")),white:""},{default:h(()=>[gn]),_:1})]),e("div",$n,[u(C,{onClick:a[15]||(a[15]=c=>r("8")),white:""},{default:h(()=>[wn]),_:1})]),e("div",kn,[u(C,{onClick:a[16]||(a[16]=c=>r("9")),white:""},{default:h(()=>[bn]),_:1})]),e("div",Sn,[u(C,{onClick:a[17]||(a[17]=c=>r("\u7532"))},{default:h(()=>[Nn]),_:1})]),e("div",xn,[u(C,{onClick:a[18]||(a[18]=c=>r("\u652F"))},{default:h(()=>[In]),_:1})]),e("div",Ln,[u(C,{onClick:a[19]||(a[19]=c=>r())},{default:h(()=>[Bn]),_:1})]),e("div",Dn,[u(C,{onClick:a[20]||(a[20]=c=>r("0")),white:""},{default:h(()=>[Pn]),_:1})]),e("div",Tn,[u(C,{onClick:a[21]||(a[21]=c=>r(-1))},{default:h(()=>[e("img",{src:_(Dt),alt:"delete"},null,8,Rn)]),_:1})])])]))}};const Mn={class:"wrapper vh-100 container-lg position-relative"},En={key:0,class:"mt-5 text-center text-light"},Hn=["src"],Un={key:1,class:"mt-5 text-center text-light"},Vn={key:0,class:"keyboard"},Zn=["src"],zn={setup(s){const{state:t}=q,o=S(null),n=Y({routeName:""}),i=S(!1),r=($,g=!1)=>{if(g)n.routeName=$;else if(typeof $=="string"){const y=n.routeName;n.routeName=y+$}else if($===-1){const y=n.routeName;n.routeName=y.slice(0,-1)}else $||(n.routeName="");n.routeName&&q.fetchRoutesByRouteName(n.routeName)},d=$=>{i.value=+$},a=()=>{const $=o.value.offsetHeight+"px";document.documentElement.style.setProperty("--h",$)};U("query",{query:n,updateRouteNameQuery:r}),U("routesList",tt(t,"routesList")),U("manualInput",{isManual:i,updateIsManual:d});function c(){a()}return E(()=>{a(),window.addEventListener("resize",c)}),nt(()=>{window.removeEventListener("resize",c)}),($,g)=>(p(),f("div",Mn,[u(Bt,{class:"header"}),e("main",{ref:(y,k)=>{k.routesList=y,o.value=y},class:"main-content overflow-hidden px-3"},[_(t).pending?(p(),f("h3",En,[e("img",{src:_(ot),width:"70",alt:"loading..."},null,8,Hn)])):_(t).error?(p(),f("h3",Un,b(_(t).error),1)):(p(),Z(pt,{key:2,type:"intercity"}))],512),u(it,{name:"keyboard-slide",onAfterLeave:a},{default:h(()=>[i.value?R("",!0):(p(),f("div",Vn,[u(An)]))]),_:1}),u(it,{name:"badge-fade"},{default:h(()=>[i.value?(p(),f("div",{key:0,class:"keyboard-badge bg-primary shadow-sm",onClick:g[0]||(g[0]=y=>i.value=!1)},[e("img",{src:_(At),alt:"\u958B\u555F\u9375\u76E4"},null,8,Zn)])):R("",!0)]),_:1})]))}};var On=F(zn,[["__scopeId","data-v-629b2344"]]);const jn={class:"bg-secondary p-4 px-md-7 py-md-5 p-lg-4"},Kn={class:"row row-cols-5 g-1"},Fn={class:"col flex-grow-1"},qn=v("\u8A2D\u5B9A"),Qn={setup(s){const{currentCity:t,updateCurrentCity:o}=H("currentCity"),n={City:"",CityCode:"",CityName:""},i=S(n),r=z(()=>i.value.City||t.value.City),d=c=>{i.value=c},a=()=>{o(i.value),i.value=n};return(c,$)=>(p(),f("div",jn,[e("div",Kn,[(p(!0),f(j,null,O(_(W),g=>(p(),f("div",{key:g.City,class:"col"},[u(C,{class:B({active:g.City===_(r)}),onClick:y=>d(g)},{default:h(()=>[v(b(g.CityName),1)]),_:2},1032,["class","onClick"])]))),128)),e("div",Fn,[u(C,{onClick:$[0]||($[0]=g=>a())},{default:h(()=>[qn]),_:1})])])]))}};var ct="./assets/back.ba343c1b.svg",Gn="./assets/swap.e8a3afde.svg";const Yn={class:"wrapper vh-100 container-lg"},Jn={class:"header header-shadow bg-dark p-3 px-lg-0"},Wn={class:"row"},Xn={class:"col-auto d-flex justify-content-center align-items-center"},ti=["src"],ei={class:"col"},si={class:"row"},oi={class:"col"},ni=["value"],ii={class:"col-auto d-flex justify-content-center align-items-center"},ai=["src"],ri={class:"col"},li=["value"],ci={key:0,class:"mt-5 text-center text-light"},di=["src"],ui={key:1,class:"mt-5 text-center text-light"},_i={setup(s){const t=et(),{state:o}=q,n=S(null),i=S(null),r=S(null),d=Y({city:{CityName:"",CityCode:"",City:""}}),a=Y({city:{CityName:"",CityCode:"",City:""}});let c=S(!0);const $=z(()=>c.value?d.city:a.city),g=()=>{c.value=!0,i.value.focus()},y=()=>{c.value=!1,r.value.focus()},k=()=>{q.fetchRoutesByCitys(d.city.City,a.city.City)},l=()=>{const I=d.city;d.city=a.city,a.city=I,k()},m=I=>{const G=c.value?d:a;G.city=I,a.city.City&&d.city.City&&k()};U("routesList",tt(o,"routesList")),U("currentCity",{currentCity:$,updateCurrentCity:m});const N=()=>{const I=n.value.offsetHeight+"px";document.documentElement.style.setProperty("--h",I)};function V(){N()}return E(()=>{N(),g(),window.addEventListener("resize",V)}),nt(()=>{window.removeEventListener("resize",V)}),(I,G)=>(p(),f("div",Yn,[e("header",Jn,[e("div",Wn,[e("div",Xn,[e("img",{onClick:G[0]||(G[0]=M=>_(t).go(-1)),src:_(ct),alt:"\u56DE\u4E0A\u4E00\u9801",role:"button",width:"6"},null,8,ti)]),e("div",ei,[u(at)])]),e("div",si,[e("div",oi,[e("input",{ref:(M,X)=>{X.input1=M,i.value=M},value:_(d).city.CityName,onClick:g,type:"text",class:"form-control bg-secondary text-center ls-1",role:"button",placeholder:"\u9078\u64C7\u51FA\u767C\u7E23\u5E02",readonly:""},null,8,ni)]),e("div",ii,[e("img",{src:_(Gn),onClick:l,alt:"\u4EA4\u63DB\u7E23\u5E02",role:"button"},null,8,ai)]),e("div",ri,[e("input",{ref:(M,X)=>{X.input2=M,r.value=M},value:_(a).city.CityName,onClick:y,type:"text",class:"form-control bg-secondary text-center ls-1",role:"button",placeholder:"\u9078\u64C7\u5230\u9054\u7E23\u5E02",readonly:""},null,8,li)])])]),e("main",{ref:(M,X)=>{X.routesList=M,n.value=M},class:"main-content overflow-hidden px-3"},[_(o).pending?(p(),f("h3",ci,[e("img",{src:_(ot),width:"70",alt:"loading..."},null,8,di)])):_(o).error?(p(),f("h3",ui,b(_(o).error),1)):(p(),Z(pt,{key:2,type:"intercity-from-to"}))],512),u(Qn)]))}};var yi=F(_i,[["__scopeId","data-v-38d86212"]]);const pi={class:"text-center"},hi=["src","width"],vt={props:{width:{type:Number,default:70}},setup(s){const t=s,{width:o}=t;return(n,i)=>(p(),f("div",pi,[e("img",{src:_(ot),width:_(o),alt:"loading..."},null,8,hi)]))}};var Ct="./assets/map.15e68740.svg";let gt=null;const D=S(null),mi=(s,t)=>{const o=s.StopPosition.PositionLon,n=s.StopPosition.PositionLat,i=L.marker([n,o],{icon:L.divIcon({className:"map-marker",html:`<span class="marker-label">${t+1}</span>`})}).addTo(D.value).bindPopup(`<h6 class="popup-name">${s.StopName.Zh_tw}</h6>`);i.markerId=s.StopUID,i.lng=o,i.lat=n},fi=s=>{const t=s.value.StationPosition.PositionLon,o=s.value.StationPosition.PositionLat,n=L.marker([o,t],{icon:L.divIcon({className:"map-marker",html:'<span class="marker-label">S</span>'})}).addTo(D.value).bindPopup(`<h6 class="popup-name">${s.value.StationName.Zh_tw}(${rt(s.value.Bearing)})</h6>`);n.markerId=s.value.StationID,n.lng=t,n.lat=o},Mt=s=>{for(let t=0;t<s.length;t++){const o=s[t],n=o.StationPosition.PositionLon,i=o.StationPosition.PositionLat,r=L.marker([i,n],{icon:L.divIcon({className:"map-marker",html:'<span class="marker-label">S</span>'})}).addTo(D.value).bindPopup(`<h6 class="popup-name">${o.StationName.Zh_tw}(${rt(o.Bearing)})</h6>`);r.markerId=o.StationID,r.lng=n,r.lat=i}},$t=s=>{const t=s.lng,o=s.lat;L.marker([o,t],{icon:L.divIcon({className:"user-marker"})}).addTo(D.value)},vi=s=>{const t=s.BusPosition.PositionLon,o=s.BusPosition.PositionLat,n=L.marker([o,t],{icon:Te}).addTo(D.value).bindPopup(`<h6 class="popup-name">${s.PlateNumb}</h6>`);n.markerId=s.PlateNumb,n.lng=t,n.lat=o},dt=()=>{gt=null,D.value.eachLayer(s=>{(s instanceof L.Marker||s instanceof L.Polyline)&&D.value.removeLayer(s)})},Ci=s=>new Promise(t=>{D.value=L.map(s,{center:[23.7,121],zoom:7}),L.tileLayer("https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png",{maxZoom:20,attribution:'&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'}).addTo(D.value).on("load",()=>{t()})}),Et=()=>new Promise(s=>{D.value.on("zoomend",()=>{s()})}),gi=s=>{dt(),Rt().then(()=>(D.value.flyTo([s.value.StationPosition.PositionLat,s.value.StationPosition.PositionLon],16),Et())).then(()=>{fi(s)})},$i=(s,t)=>{dt(),Rt().then(()=>(D.value.flyTo([s.lat,s.lng],16),Et())).then(()=>{$t(s),Mt(t)})},wi=(s,t)=>{dt(),$t(s),Mt(t)},ki=(s,t,o)=>{let n;o?n=o:n=s.map(i=>{const r=i.StopPosition.PositionLon;return[i.StopPosition.PositionLat,r]}),dt(),gt=L.polyline(n,{color:"#fcd42c"}).addTo(D.value),D.value.flyToBounds(gt.getBounds()),s.forEach((i,r)=>mi(i,r)),t.forEach(i=>vi(i))};var Q={mapInit:Ci,drawStopsPathAndMarkers:ki,addUserMarker:$t,drawStationMarker:gi,drawNearByMarkers:$i,redrawNearByMarkers:wi};const bi={class:"bg-dark vh-100 d-flex flex-column"},Si={class:"header-shadow bg-dark"},Ni={class:"d-flex justify-content-between align-items-center px-3 py-4"},xi=["src"],Ii=["src"],Li={id:"stations-map",class:"flex-grow-1"},Bi={key:0,class:"mt-5"},Di={key:1,class:"mt-5 text-center"},Pi={class:"list-group"},Ti={class:"d-flex justify-content-between align-items-center"},Ri={class:"fs-6"},Ai={class:"text-light fs-7"},Mi={setup(s){const t=et(),o=S(!1),n=S(!1),i=S(null),{state:r}=A,d=()=>{const a=o.value;o.value=!a,o.value?_t(()=>{Q.mapInit("stations-map").then(()=>{const c=r.userPosition,$=r.nearByStations;Q.drawNearByMarkers(c,$),n.value=!0})}):n.value=!1};return ut(()=>r.pending,a=>{if(a&&n.value){const c=r.userPosition,$=r.nearByStations;Q.redrawNearByMarkers(c,$)}}),E(()=>{const a=i.value.getBoundingClientRect().height+"px";document.documentElement.style.setProperty("--h",a),A.fetchNearByStations(500)}),(a,c)=>{const $=T("router-link"),g=T("perfect-scrollbar");return p(),f("div",bi,[e("div",Si,[e("div",Ni,[e("img",{onClick:c[0]||(c[0]=y=>_(t).go(-1)),src:_(ct),alt:"\u56DE\u4E0A\u4E00\u9801",role:"button",width:"6"},null,8,xi),u(at),e("img",{onClick:c[1]||(c[1]=y=>d()),src:_(Ct),class:B({"map-active":o.value}),alt:"\u5730\u5716",role:"button",width:"23"},null,10,Ii)])]),K(e("div",Li,null,512),[[J,o.value]]),K(e("div",{ref:(y,k)=>{k.stationsList=y,i.value=y},class:"flex-grow-1 container"},[_(r).pending?(p(),f("h3",Bi,[u(vt)])):_(r).error?(p(),f("h3",Di,b(_(r).error),1)):(p(),Z(g,{key:2},{default:h(()=>[e("ul",Pi,[(p(!0),f(j,null,O(_(r).nearByStations,(y,k)=>(p(),f("li",{key:y.StationUID,class:B(["list-group-item list-group-item-action",{"bg-secondary":k%2==0}])},[u($,{to:{name:"StationPage",params:{city:_(Tt)(y.StationUID.slice(0,3)),stationId:y.StationID}},class:"d-block link-primary text-decoration-none"},{default:h(()=>[e("div",Ti,[e("div",null,[e("h4",Ri,b(y.StationName.Zh_tw)+"("+b(_(rt)(y.Bearing))+") ",1),e("p",Ai,b(y.Stops.length)+" \u500B\u7AD9\u724C ",1)]),e("p",null,b(y.Distance)+" \u516C\u5C3A",1)])]),_:2},1032,["to"])],2))),128))])]),_:1}))],512),[[J,!o.value]])])}}};var Ei="./assets/wheelchair.236c2eb7.svg";const Hi={class:"position-relative"},Ui={key:0,class:"me-4 pt-4 mb-0 text-end text-primary ls-1"},Vi={key:1,class:"me-4 pt-4 mb-0 text-end text-primary ls-1"},Zi=v(" *\u66F4\u65B0\u4E2D... "),zi={class:"list-unstyled"},Oi={class:"d-flex justify-content-start align-items-center"},ji={class:"me-4 d-flex justify-content-end align-items-center"},Ki=["src"],Fi={key:1,class:"plate"},qi={key:2,class:"station-badge active"},Qi={key:3,class:"station-badge active noafter"},Gi={key:4,class:"station-badge"},Yi={key:5,class:"station-badge noafter"},Ji={setup(s){const{currentStops:t,fetchNewStops:o}=H("stops");let n=null;const i=S(0);return E(()=>{n=setInterval(async()=>{if(i.value>=60)await o(),i.value=0;else{const r=i.value;i.value=r+1}},1e3)}),nt(()=>clearInterval(n)),(r,d)=>{const a=T("router-link");return p(),f("div",Hi,[i.value<60?(p(),f("p",Ui," *\u65BC "+b(i.value)+" \u79D2\u524D\u66F4\u65B0 ",1)):(p(),f("p",Vi,[Zi,u(vt,{width:25,class:"d-inline-block"})])),e("ul",zi,[(p(!0),f(j,null,O(_(t),(c,$)=>(p(),f("li",{key:$,class:"py-2 flex-between"},[e("div",Oi,[e("span",{class:B(["flex-center time-label",[c.Border?"label-border":"",c.BgColor]])},[e("span",{class:B([c.Color,c.TimeLabel.length>3?"fs-8":""])},b(c.TimeLabel),3)],2),u(a,{to:{name:"StationPage",params:{city:_(Tt)(c.LocationCityCode),stationId:c.StationID}},class:B([c.LinkColor,"text-decoration-none fs-7 ls-1 ms-2"])},{default:h(()=>[v(b($+1)+". "+b(c.StopName.Zh_tw),1)]),_:2},1032,["to","class"])]),e("div",ji,[c.accessible?(p(),f("img",{key:0,src:_(Ei),alt:"\u7121\u969C\u7919\u516C\u8ECA"},null,8,Ki)):R("",!0),c.hasBus?(p(),f("span",Fi,b(c.plate),1)):R("",!0),c.hasBus&&$>0?(p(),f("div",qi)):c.hasBus&&$===0?(p(),f("div",Qi)):$>0?(p(),f("div",Gi)):(p(),f("div",Yi))])]))),128))])])}}};const Wi=["src"],Xi=v(" \u56DE\u9996\u9801 "),ta={setup(s){return(t,o)=>{const n=T("router-link");return p(),Z(n,{to:{name:"Home"},class:"hide-text"},{default:h(()=>[e("img",{src:_(Lt),alt:"\u56DE\u9996\u9801",class:"logo-header-size"},null,8,Wi),Xi]),_:1})}}};var ea=F(ta,[["__scopeId","data-v-83348e74"]]);const sa={class:"text-center"},oa=["src","width"],na={props:{width:{type:Number,default:70}},setup(s){const t=s,{width:o}=t;return(n,i)=>(p(),f("div",sa,[e("img",{src:_(ot),width:_(o),alt:"loading..."},null,8,oa)]))}};const Ht=s=>(Gt("data-v-6d817ff8"),s=s(),Yt(),s),ia={class:"bg-secondary vh-100 d-flex flex-column"},aa={class:"header-shadow bg-dark"},ra={class:"d-flex justify-content-between align-items-center px-3 py-4"},la=["src"],ca=["src"],da={class:"container"},ua={class:"row"},_a=Ht(()=>e("span",{class:"text-primary"},"\u5F80",-1)),ya=Ht(()=>e("span",{class:"text-primary"},"\u5F80",-1)),pa={id:"stops-map",class:"flex-grow-1"},ha={class:"flex-grow-1 container overflow-auto"},ma={key:0,class:"mt-5 text-center"},fa={key:1,class:"mt-5 text-center text-light"},va={key:2},Ca={props:{city:String,routeName:String},setup(s){const t=s,o=et(),n=S("forward"),i=S(!1),r=S(!1),{state:d}=A,a=z(()=>{if(n.value==="forward")return d.forwardStopsList;if(n.value==="backward")return d.backwardStopsList});U("stops",{currentStops:a,fetchNewStops:async()=>{await A.fetchStopsAndBusArrivalTime(t.city,t.routeName)}});const $=z(()=>{const l=d.forwardStopsList.length;return l===0?"\u53BB\u7A0B":d.forwardStopsList[l-1].StopName.Zh_tw}),g=z(()=>{const l=d.backwardStopsList.length;return l===0?"\u8FD4\u7A0B":d.backwardStopsList[l-1].StopName.Zh_tw});ut([i,n],l=>{const m=l[0],N=l[1],V=N==="forward"?d.forwardStopsList:d.backwardStopsList,I=N==="forward"?d.forwardBusList:d.backwardBusList,G=N==="forward"?d.forwardRouteShape:d.backwardRouteShape;m&&_t(()=>{r.value||(Q.mapInit("stops-map"),r.value=!0),Q.drawStopsPathAndMarkers(V,I,G)})});const y=l=>{n.value=l},k=()=>{const l=i.value;i.value=!l};return A.fetchStopsAndBusArrivalTime(t.city,t.routeName),(l,m)=>(p(),f("div",ia,[e("div",aa,[e("div",ra,[e("img",{onClick:m[0]||(m[0]=N=>_(o).go(-1)),src:_(ct),alt:"\u56DE\u4E0A\u4E00\u9801",role:"button",width:"6"},null,8,la),u(ea),e("img",{onClick:m[1]||(m[1]=N=>k()),src:_(Ct),class:B({"map-active":i.value}),alt:"\u5730\u5716",role:"button",width:"23"},null,10,ca)]),e("div",da,[e("div",ua,[e("div",{onClick:m[2]||(m[2]=N=>y("forward")),class:B(["col tab pb-3 text-center position-relative",{active:n.value==="forward"}]),role:"button"},[_a,v(" "+b(_($)),1)],2),e("div",{onClick:m[3]||(m[3]=N=>y("backward")),class:B(["col tab pb-3 text-center position-relative",{active:n.value==="backward"}]),role:"button"},[ya,v(" "+b(_(g)),1)],2)])])]),K(e("div",pa,null,512),[[J,i.value]]),K(e("div",ha,[_(d).pending?(p(),f("h3",ma,[u(na)])):_(d).error?(p(),f("h3",fa,b(_(d).error),1)):(p(),f("div",va,[u(Ji)]))],512),[[J,!i.value]])]))}};var ga=F(Ca,[["__scopeId","data-v-6d817ff8"]]);const $a=e("h1",null,"\u5EFA\u69CB\u4E2D",-1),wa=[$a],ka={props:{routeName:String},setup(s){const t=s;return E(()=>{q.fetchSchedule(t.routeName)}),(o,n)=>(p(),f("div",null,wa))}},ba={class:"bg-dark vh-100 d-flex flex-column"},Sa={class:"header-shadow bg-dark"},Na={class:"d-flex justify-content-between align-items-center px-3 py-4"},xa=["src"],Ia=["src"],La={id:"station-map",class:"flex-grow-1"},Ba={key:0,class:"mt-5"},Da={key:1,class:"mt-5 text-center text-light"},Pa={class:"fs-6 text-light mt-5"},Ta={class:"list-group"},Ra={class:"text-light fs-7"},Aa=e("span",{class:"text-primary mx-1"},"\u5F80",-1),Ma={props:{city:String,stationId:String},setup(s){const t=s,{city:o,stationId:n}=t,i=et(),r=S(!1),d=S(null);let a={pending:!0},c=null;const $=()=>{const g=r.value;r.value=!g,r.value&&_t(()=>{Q.mapInit("station-map").then(()=>{Q.drawStationMarker(c)})})};return o==="intercity"?(q.fetchStation(n),a=q.state,c=tt(a,"station")):(A.fetchStation(o,n),a=A.state,c=tt(a,"station")),E(()=>{const g=d.value.getBoundingClientRect().height+"px";document.documentElement.style.setProperty("--h",g)}),(g,y)=>{const k=T("router-link"),l=T("perfect-scrollbar");return p(),f("div",ba,[e("div",Sa,[e("div",Na,[e("img",{onClick:y[0]||(y[0]=m=>_(i).go(-1)),src:_(ct),alt:"\u56DE\u4E0A\u4E00\u9801",role:"button",width:"6"},null,8,xa),u(at),e("img",{onClick:y[1]||(y[1]=m=>$()),src:_(Ct),class:B({"map-active":r.value}),alt:"\u5730\u5716",role:"button",width:"23"},null,10,Ia)])]),K(e("div",La,null,512),[[J,r.value]]),K(e("div",{ref:(m,N)=>{N.routesList=m,d.value=m},class:"flex-grow-1 container"},[_(a).pending?(p(),f("h3",Ba,[u(vt)])):_(a).error?(p(),f("h3",Da,b(_(a).error),1)):(p(),Z(l,{key:2},{default:h(()=>[e("h4",Pa,b(_(c).StationName.Zh_tw)+"("+b(_(rt)(_(c).Bearing))+") ",1),e("ul",Ta,[(p(!0),f(j,null,O(_(c).PassThrough,(m,N)=>(p(),f("li",{key:m.RouteUID,class:B(["list-group-item list-group-item-action",{"bg-secondary":N%2==0}])},[u(k,{to:{name:"InterCityRoutePage",params:{routeName:m.RouteName.Zh_tw}},class:"d-block link-primary text-decoration-none"},{default:h(()=>[v(b(m.RouteName.Zh_tw)+" ",1),e("p",Ra,[Aa,v(" "+b(m.finalStop.StopName.Zh_tw),1)])]),_:2},1032,["to"])],2))),128))])]),_:1}))],512),[[J,!r.value]])])}}},Ea=Jt({history:Wt(),routes:[{path:"/",component:me,name:"Home"},{path:"/city",component:Do,name:"CitySearch"},{path:"/nearby",component:Mi,name:"NearBy"},{path:"/intercity",component:On,name:"InterCitySearch"},{path:"/intercity/from-to",component:yi,name:"InterCitySearch2"},{path:"/routes/intercity/:routeName",component:ka,name:"InterCityRoutePage",props:!0},{path:"/routes/:city/:routeName",component:ga,name:"RoutePage",props:!0},{path:"/stations/:city/:stationId",component:Ma,name:"StationPage",props:!0}]});const Ha={},Ua={id:"app"};function Va(s,t){const o=T("router-view");return p(),f("div",Ua,[u(o)])}var Za=F(Ha,[["render",Va]]);const wt=Xt(Za);wt.use(Ea);wt.use(te);wt.mount("#app");
